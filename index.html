<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Talk 2Me Nice ‚Äî Daily Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
:root {
  --bg-main: linear-gradient(160deg, #1b1f27 0%, #2a2f3b 100%);
  --bg-card: #2c313d;
  --accent: #ffb86c;
  --text-main: #e1e4ea;
  --text-muted: #a1a6b0;
}
body {
  margin:0;
  font-family:'Montserrat', system-ui,sans-serif;
  background: var(--bg-main);
  color: var(--text-main);
  display:flex;
  flex-direction:column;
  min-height:100vh;
}
#chatContainer {
  display:flex;
  max-width:900px;
  margin:2rem auto;
  gap:1rem;
  flex:1;
}
#profileSidebar {
  width:220px;
  padding:1rem;
  background:var(--bg-card);
  border-radius:16px;
  flex-shrink:0;
  display:flex;
  flex-direction:column;
  gap:1rem;
  box-shadow:0 6px 16px rgba(0,0,0,0.3);
}
#packs { display:flex; flex-direction:column; gap:0.5rem; margin-top:1rem; }
.packButton {
  background:#1f232d;
  color:var(--text-main);
  border:1px solid var(--accent);
  padding:0.5rem 0.8rem;
  border-radius:12px;
  cursor:pointer;
  transition:0.2s;
  font-size:0.9rem;
}
.packButton:hover { background:var(--accent); color:#1b1f27; transform:scale(1.03); }
#chatArea {
  flex:1;
  display:flex;
  flex-direction:column;
  background:#242833;
  border-radius:16px;
  padding:1rem;
  overflow-y:auto;
}
.message {
  max-width:75%;
  padding:0.8rem 1.2rem;
  margin-bottom:0.7rem;
  border-radius:20px;
  line-height:1.5;
  opacity:0;
  animation: fadeInMessage 0.5s forwards;
}
.user { background:var(--accent); color:#1b1f27; align-self:flex-end; cursor:text; }
.bot { background:var(--bg-card); align-self:flex-start; cursor:pointer; }
.message span.word { text-decoration:underline; cursor:pointer; }
#inputArea { display:flex; padding:0.8rem; gap:0.5rem; }
#userInput { flex:1; padding:0.6rem; border-radius:12px; border:none; background:#1f232d; color:var(--text-main);}
button.sendBtn { padding:0.6rem 1rem; border-radius:999px; border:none; background:var(--accent); cursor:pointer; transition:all 0.3s ease;}
button.sendBtn:hover { transform:scale(1.05); background:#ff9f40; }
#nextPhrase { margin-top:0.5rem; padding:0.5rem 1rem; border-radius:999px; border:none; background:#6fa8dc; color:#1b1f27; cursor:pointer; display:none; }
#nextPhrase:hover { background:#5b90c7; }
@keyframes fadeInMessage { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }
#gear { position:fixed; bottom:90px; right:20px; width:44px; height:44px; border-radius:50%; background:var(--bg-card); display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:20px; box-shadow:0 4px 12px rgba(0,0,0,0.3);}
#options { position:fixed; bottom:150px; right:20px; background:var(--bg-card); padding:1rem; border-radius:16px; width:260px; display:none; }
#options label { display:flex; align-items:center; gap:0.5rem; font-size:0.85rem; }
</style>
</head>
<body>

<div id="chatContainer">
  <div id="profileSidebar">
    <h3 id="profileName"></h3>
    <p id="profileLanguage"></p>
    <p id="profileCompanion"></p>
    <div id="packs"></div>
    <button id="nextPhrase" onclick="nextPhrase()">Next Phrase ‚Üí</button>
  </div>
  <div id="chatArea"></div>
</div>

<div id="inputArea">
  <input id="userInput" placeholder="Type a word or phrase‚Ä¶" />
  <button class="sendBtn" onclick="sendMessage()">Send</button>
</div>

<div id="gear" onclick="toggleOptions()">‚öôÔ∏è</div>
<div id="options">
  <label><input type="checkbox" id="phoneticToggle"/> Pronunciation mode</label>
</div>

<script>
const nickname = localStorage.getItem("nickname") || "Friend";
const language = localStorage.getItem("language") || "en-US";
const companion = localStorage.getItem("companion") || "Whisp";

document.getElementById("profileName").textContent = nickname;
document.getElementById("profileLanguage").textContent = `Language: ${language}`;
document.getElementById("profileCompanion").textContent = `Companion: ${companion}`;

const chatArea = document.getElementById("chatArea");
const packsDiv = document.getElementById("packs");
const nextBtn = document.getElementById("nextPhrase");

const conversationPresets = {
  "Workplace Conversations": [
    "Hello, how are you?",
    "Good morning!",
    "Let's schedule a meeting."
  ],
  "Dating & Social": [
    "Hi! How was your day?",
    "Do you want to grab coffee?",
    "I like your smile!"
  ],
  "Travel": [
    "Where is the nearest hotel?",
    "Can you recommend a restaurant?",
    "What time does the train leave?"
  ],
  "Advanced Small Talk": [
    "Nice weather today, isn't it?",
    "Did you watch the game last night?",
    "Any plans for the weekend?"
  ]
};

function getDailyPreset() {
  const keys = Object.keys(conversationPresets);
  const today = new Date().getDate();
  const index = today % keys.length;
  const packName = keys[index];
  const phrases = conversationPresets[packName];
  const phraseIndex = today % phrases.length;
  return { packName, phrases, phraseIndex };
}

let daily = getDailyPreset();
let currentIndex = daily.phraseIndex;
let currentPack = daily.packName;

// Only show one starter
packsDiv.innerHTML = `<div class="packButton" onclick="startDaily()">${daily.packName} ‚Üí ${daily.phrases[currentIndex]}</div>`;

function startDaily() {
  chatArea.innerHTML = "";
  addBotMessage(daily.phrases[currentIndex]);
  nextBtn.style.display = "inline-block";
}

function nextPhrase(){
  currentIndex++;
  if(currentIndex >= daily.phrases.length){
    addBotMessage("You've finished all phrases for today! üéâ");
    nextBtn.style.display = "none";
    return;
  }
  addBotMessage(daily.phrases[currentIndex]);
}

function addBotMessage(text){
  const div=document.createElement("div");
  div.className="message bot";
  
  // Split into words for clickable pronunciation
  text.split(" ").forEach(word=>{
    const span=document.createElement("span");
    span.className="word";
    span.textContent = word + " ";
    span.onclick = ()=> speakWord(word);
    div.appendChild(span);
  });

  chatArea.appendChild(div);
  chatArea.scrollTop = chatArea.scrollHeight;
}

function sendMessage(){
  const input = document.getElementById("userInput");
  if(!input.value.trim()) return;
  const div = document.createElement("div");
  div.className="message user";
  div.textContent = input.value;
  chatArea.appendChild(div);
  input.value="";
  chatArea.scrollTop = chatArea.scrollHeight;
}

function speakWord(word){
  const u = new SpeechSynthesisUtterance(word);
  u.lang = language;
  speechSynthesis.speak(u);
}

function toggleOptions(){
  const options = document.getElementById("options");
  options.style.display = options.style.display==="block"?"none":"block";
}
</script>
</body>
</html>
