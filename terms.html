<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Talk 2Me Nice</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
:root {
  --bg-main: linear-gradient(160deg, #1b1f27 0%, #2a2f3b 100%);
  --bg-card: #2c313d;
  --accent: #ffb86c;
  --text-main: #e1e4ea;
  --text-muted: #a1a6b0;
}

/* Global */
body {margin:0; font-family:'Montserrat',system-ui,sans-serif; background: var(--bg-main); color: var(--text-main);}
h3,h4 {font-family:'Playfair Display', serif;}
button {font-family:'Montserrat', sans-serif; cursor:pointer;}
.hidden {display:none;}

/* Landing Page */
#landingPage {max-width:500px; margin:2rem auto; display:flex; flex-direction:column; gap:1rem;}
#landingPage input {padding:0.6rem; border-radius:12px; border:none; background:#1f232d; color:var(--text-main);}
.companionGrid {display:grid; grid-template-columns:repeat(2,1fr); gap:1rem;}
.companionCard {background: var(--bg-card); border-radius:14px; padding:1rem; text-align:center; border:2px solid transparent; transition: all 0.25s ease;}
.companionCard.active {border-color: var(--accent); box-shadow:0 0 0 2px rgba(255,184,108,0.25);}
.companionCard:hover {transform:translateY(-4px); box-shadow:0 6px 16px rgba(0,0,0,0.35);}
#landingPage button {padding:0.6rem 1rem; border-radius:999px; border:none; background: var(--accent); transition:all 0.3s ease;}
#landingPage button:hover {background:#ff9f40; transform:scale(1.05);}

/* Chat Page */
#chatContainer {max-width:900px; margin:2rem auto; display:flex; gap:1rem; flex-direction:row;}
#profileSidebar {width:220px; padding:1rem; background: var(--bg-card); border-radius:16px; flex-shrink:0; display:flex; flex-direction:column; gap:1rem;}
#chatArea {flex:1; display:flex; flex-direction:column; background: var(--bg-card); border-radius:16px; padding:1rem; box-shadow:0 6px 16px rgba(0,0,0,0.25);}
#chat {flex:1; overflow-y:auto; padding-bottom:1rem;}
.message {max-width:75%; padding:0.8rem 1.2rem; margin-bottom:0.7rem; border-radius:20px; line-height:1.5;}
.user {background:var(--accent); color:#1b1f27; align-self:flex-end;}
.bot {background:var(--bg-card); align-self:flex-start;}
footer {display:flex; padding:0.8rem; gap:0.5rem; background:#1f232d; border-radius:12px; position:sticky; bottom:0; margin-top:1rem;}
footer input {flex:1; padding:0.6rem; border-radius:12px; border:none; background:#2c313d; color:var(--text-main);}
footer button {padding:0.6rem 1rem; border-radius:999px; border:none; background: var(--accent); transition: all 0.3s ease;}
footer button:hover {background:#ff9f40; transform:scale(1.05);}
#gearBtn {margin-left:0.5rem; font-size:1.2rem; background:none; color:var(--accent); border:none;}

/* Starter Dropdown */
#starterDropdown {width:100%; padding:0.5rem; border-radius:12px; background:#1f232d; color:var(--text-main); border:none; margin-bottom:1rem;}

/* Companion Center Stage */
#currentCompanion {text-align:center; margin-bottom:1rem;}
#currentCompanion h2 {font-size:2rem; color:var(--accent); margin:0;}
#currentCompanion p {font-size:0.9rem; color:var(--text-muted); margin:0;}

/* Footer Links */
#footerLinks {margin-top:0.5rem; display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-muted);}
#footerLinks a {color:var(--text-muted); text-decoration:none;}
#footerLinks a:hover {text-decoration:underline;}
</style>
</head>
<body>

<!-- Landing Page -->
<div id="landingPage">
  <h2 style="text-align:center; color:var(--accent);">Talk 2Me Nice</h2>
  <input id="nicknameInput" placeholder="Enter your nickname">
  <div id="companionSelector">
    <h3>Select Your Companion</h3>
    <div class="companionGrid">
      <div class="companionCard" data-companion="Whisp"><h4>Whisp/Sprite</h4><p>Whimsical, supportive</p></div>
      <div class="companionCard" data-companion="Robot"><h4>Robot</h4><p>Logical, futuristic</p></div>
      <div class="companionCard" data-companion="Star"><h4>Star</h4><p>Bold, radiant</p></div>
      <div class="companionCard" data-companion="Cloud"><h4>Cloud</h4><p>Calm, soft</p></div>
    </div>
  </div>
  <button onclick="startChat()">Start Chat</button>
</div>

<!-- Chat Page -->
<div id="chatContainer" class="hidden">
  <div id="profileSidebar">
    <div id="currentCompanion">
      <h2 id="companionName"></h2>
      <p id="companionDesc"></p>
    </div>
    <hr>
    <p>Conversation Starters</p>
    <select id="starterDropdown" onchange="startStarter()">
      <option value="">-- Select Starter --</option>
    </select>
    <button id="gearBtn" onclick="openOptions()">⚙️ Options</button>
    <div id="optionsPanel" class="hidden">
      <h4 style="color:var(--accent);">Change Companion</h4>
      <div class="companionGrid">
        <div class="companionCard" data-companion="Whisp"><h4>Whisp/Sprite</h4></div>
        <div class="companionCard" data-companion="Robot"><h4>Robot</h4></div>
        <div class="companionCard" data-companion="Star"><h4>Star</h4></div>
        <div class="companionCard" data-companion="Cloud"><h4>Cloud</h4></div>
      </div>
    </div>
  </div>
  <div id="chatArea">
    <div id="chat"></div>
  </div>
</div>

<footer class="hidden">
  <input id="userInput" placeholder="Type your message…">
  <button onclick="sendMessage()">Send</button>
  <div id="footerLinks">
    <a href="#" onclick="returnToChat()">Privacy</a>
    <a href="#" onclick="returnToChat()">Support</a>
  </div>
</footer>

<script>
// ======= Companion Definitions =======
const companions = {
  Whisp: {name:"Whisp/Sprite",desc:"Whimsical, supportive"},
  Robot: {name:"Robot",desc:"Logical, futuristic"},
  Star: {name:"Star",desc:"Bold, radiant"},
  Cloud: {name:"Cloud",desc:"Calm, soft"}
};

// ======= Landing Page =======
const companionCards = document.querySelectorAll("#landingPage .companionCard");
const nicknameInput = document.getElementById("nicknameInput");
let selectedCompanion = "Whisp";

companionCards.forEach(card=>{
  card.addEventListener("click",()=>{
    companionCards.forEach(c=>c.classList.remove("active"));
    card.classList.add("active");
    selectedCompanion = card.dataset.companion;
  });
});

function startChat(){
  if(!nicknameInput.value.trim()){alert("Enter a nickname"); return;}
  localStorage.setItem("nickname",nicknameInput.value.trim());
  localStorage.setItem("companion",selectedCompanion);

  document.getElementById("landingPage").classList.add("hidden");
  document.getElementById("chatContainer").classList.remove("hidden");
  document.querySelector("footer").classList.remove("hidden");

  updateCompanionDisplay();
  populateStarters();
}

// ======= Chat Companion Display =======
function updateCompanionDisplay(){
  const compId = localStorage.getItem("companion") || "Whisp";
  document.getElementById("companionName").textContent = companions[compId].name;
  document.getElementById("companionDesc").textContent = companions[compId].desc;

  // options panel
  const optionsCards = document.querySelectorAll("#optionsPanel .companionCard");
  optionsCards.forEach(card=>{
    card.classList.toggle("active", card.dataset.companion === compId);
    card.onclick=()=>{
      localStorage.setItem("companion", card.dataset.companion);
      updateCompanionDisplay();
    };
  });
}

// ======= Options Panel =======
function openOptions(){
  const panel = document.getElementById("optionsPanel");
  panel.classList.toggle("hidden");
}

// ======= Conversation Starters =======
const conversationStarters = {
  "Workplace":["Good morning! How's your day starting?","Hi! Did you catch the latest project update?","Evening! Ready to wrap things up?"],
  "Dating":["Hi there! Would you like to grab coffee?","Hey! Want to take a walk this afternoon?"],
  "Travel":["Hi! Where is the nearest train station?"],
  "School":["Hello! How was class today?","Do you need help with homework?"],
  "Advanced":["Hello! Did you see the game yesterday?"]
};

function getDailyStarter(category){
  const today = new Date().toDateString();
  const key = `starter_${category}`;
  let stored = JSON.parse(localStorage.getItem(key)) || {};
  if(stored.date === today) return stored.phrase;
  const phrases = conversationStarters[category];
  const phrase = phrases[Math.floor(Math.random()*phrases.length)];
  localStorage.setItem(key,JSON.stringify({date:today,phrase}));
  return phrase;
}

function populateStarters(){
  const dd = document.getElementById("starterDropdown");
  dd.innerHTML = `<option value="">-- Select Starter --</option>`;
  Object.keys(conversationStarters).forEach(cat=>{
    const phrase = getDailyStarter(cat);
    const opt = document.createElement("option");
    opt.value = phrase;
    opt.textContent = `${cat}: ${phrase}`;
    dd.appendChild(opt);
  });
}

function startStarter(){
  const val = document.getElementById("starterDropdown").value;
  if(val) sendMessage(val);
}

// ======= Chat Handling =======
const chat = document.getElementById("chat");
function addMessage(text,sender){
  const div=document.createElement("div");
  div.className=`message ${sender}`;
  div.textContent=text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function sendMessage(msg=null){
  const input = document.getElementById("userInput");
  const text = msg || input.value.trim();
  if(!text) return;
  addMessage(text,"user");
  input.value="";
  // placeholder AI echo
  setTimeout(()=>addMessage(`Echo: ${text}`,"bot"),500);
}

// ======= Footer Links =======
function returnToChat(){alert("This would normally open Privacy/Support modal and return to chat.");}
</script>
</body>
</html>
