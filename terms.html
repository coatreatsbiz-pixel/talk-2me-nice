<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Talk 2Me Nice</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
:root {
  --bg-main: linear-gradient(160deg, #1b1f27 0%, #2a2f3b 100%);
  --bg-card: #2c313d;
  --accent: #ffb86c;
  --text-main: #e1e4ea;
  --text-muted: #a1a6b0;
}

/* Global */
body {margin:0; font-family:'Montserrat',system-ui,sans-serif; background: var(--bg-main); color: var(--text-main);}
h3,h4 {font-family:'Playfair Display', serif;}
button {font-family:'Montserrat', sans-serif; cursor:pointer;}
.hidden {display:none;}

/* Landing Page */
#landingPage {max-width:500px; margin:2rem auto; display:flex; flex-direction:column; gap:1rem; text-align:center;}
#landingPage input {padding:0.6rem; border-radius:12px; border:none; background:#1f232d; color:var(--text-main);}
#landingPage button {padding:0.6rem 1rem; border-radius:999px; border:none; background: var(--accent); transition:all 0.3s ease;}
#landingPage button:hover {background:#ff9f40; transform:scale(1.05);}
.companionGrid {display:grid; grid-template-columns:repeat(2,1fr); gap:1rem; margin-top:1rem;}

/* Companion Visuals */
.companionCard {background: var(--bg-card); border-radius:14px; padding:1rem; text-align:center; border:2px solid transparent; transition: all 0.25s ease; position:relative;}
.companionCard.active {border-color: var(--accent); box-shadow:0 0 0 2px rgba(255,184,108,0.25);}
.companionCard:hover {transform:translateY(-4px); box-shadow:0 6px 16px rgba(0,0,0,0.35);}
.companionVisual {width:80px; height:80px; margin:0 auto 0.5rem; border-radius:50%; position:relative;}

/* Companion Types */
.whisp {background: #88cfff; filter: blur(2px);}
.cloud {background: #a8e0ff; filter: blur(2px);}
.star {width:0;height:0;border-left:40px solid transparent;border-right:40px solid transparent;border-bottom:70px solid #ffea00;position:relative; margin:auto;}
.star:after {content:""; position:absolute; left:-40px; top:25px; width:0; height:0; border-left:40px solid transparent; border-right:40px solid transparent; border-top:70px solid #ffea00;}
.robot {background: #888; border-radius:12px;}

/* Chat Page */
#chatContainer {max-width:900px; margin:2rem auto; display:flex; gap:1rem; flex-direction:row;}
#profileSidebar {width:220px; padding:1rem; background: var(--bg-card); border-radius:16px; flex-shrink:0; display:flex; flex-direction:column; gap:1rem;}
#chatArea {flex:1; display:flex; flex-direction:column; background: var(--bg-card); border-radius:16px; padding:1rem; box-shadow:0 6px 16px rgba(0,0,0,0.25);}
#chat {flex:1; overflow-y:auto; padding-bottom:1rem;}
.message {max-width:75%; padding:0.8rem 1.2rem; margin-bottom:0.7rem; border-radius:20px; line-height:1.5;}
.user {background:var(--accent); color:#1b1f27; align-self:flex-end;}
.bot {background:var(--bg-card); align-self:flex-start;}
footer {display:flex; padding:0.8rem; gap:0.5rem; background:#1f232d; border-radius:12px; position:sticky; bottom:0; margin-top:1rem;}
footer input {flex:1; padding:0.6rem; border-radius:12px; border:none; background:#2c313d; color:var(--text-main);}
footer button {padding:0.6rem 1rem; border-radius:999px; border:none; background: var(--accent); transition: all 0.3s ease;}
footer button:hover {background:#ff9f40; transform:scale(1.05);}
#gearBtn {margin-left:0.5rem; font-size:1.2rem; background:none; color:var(--accent); border:none;}
#starterDropdown {width:100%; padding:0.5rem; border-radius:12px; background:#1f232d; color:var(--text-main); border:none; margin-bottom:1rem;}
#currentCompanion {text-align:center; margin-bottom:1rem;}
#currentCompanion h2 {font-size:2rem; color:var(--accent); margin:0;}
#currentCompanion p {font-size:0.9rem; color:var(--text-muted); margin:0;}
#footerLinks {margin-top:0.5rem; display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-muted);}
#footerLinks a {color:var(--text-muted); text-decoration:none;}
#footerLinks a:hover {text-decoration:underline;}
</style>
</head>
<body>

<!-- Landing Page -->
<div id="landingPage">
  <h2 style="color:var(--accent);">Talk 2Me Nice</h2>
  <input id="nicknameInput" placeholder="Enter your nickname">
  <div id="companionSelector">
    <h3>Select Your Companion</h3>
    <div class="companionGrid">
      <div class="companionCard" data-companion="Whisp">
        <div class="companionVisual whisp"></div>
        <h4>Whisp/Sprite</h4>
      </div>
      <div class="companionCard" data-companion="Robot">
        <div class="companionVisual robot"></div>
        <h4>Robot</h4>
      </div>
      <div class="companionCard" data-companion="Star">
        <div class="companionVisual star"></div>
        <h4>Star</h4>
      </div>
      <div class="companionCard" data-companion="Cloud">
        <div class="companionVisual cloud"></div>
        <h4>Cloud</h4>
      </div>
    </div>
  </div>
  <button onclick="startChat()">Start Chat</button>
</div>

<!-- Chat Page -->
<div id="chatContainer" class="hidden">
  <div id="profileSidebar">
    <div id="currentCompanion">
      <h2 id="companionName"></h2>
      <p id="companionDesc"></p>
    </div>
    <hr>
    <p>Conversation Starters</p>
    <select id="starterDropdown" onchange="startStarter()">
      <option value="">-- Select Starter --</option>
    </select>
    <button id="gearBtn" onclick="openOptions()">⚙️ Options</button>
    <div id="optionsPanel" class="hidden"></div>
  </div>
  <div id="chatArea">
    <div id="chat"></div>
  </div>
</div>

<footer class="hidden">
  <input id="userInput" placeholder="Type your message…">
  <button onclick="sendMessage()">Send</button>
  <div id="footerLinks">
    <a href="#" onclick="returnToChat()">Privacy</a>
    <a href="#" onclick="returnToChat()">Support</a>
  </div>
</footer>

<script>
// Companion data
const companions = {
  Whisp:{name:"Whisp/Sprite",desc:"Whimsical, supportive"},
  Robot:{name:"Robot",desc:"Logical, futuristic"},
  Star:{name:"Star",desc:"Bold, radiant"},
  Cloud:{name:"Cloud",desc:"Calm, soft"}
};

const companionCards = document.querySelectorAll("#landingPage .companionCard");
const nicknameInput = document.getElementById("nicknameInput");
let selectedCompanion = "Whisp";

companionCards.forEach(card=>{
  card.addEventListener("click",()=>{
    companionCards.forEach(c=>c.classList.remove("active"));
    card.classList.add("active");
    selectedCompanion = card.dataset.companion;
  });
});

function startChat(){
  if(!nicknameInput.value.trim()){alert("Enter a nickname"); return;}
  localStorage.setItem("nickname",nicknameInput.value.trim());
  localStorage.setItem("companion",selectedCompanion);
  document.getElementById("landingPage").classList.add("hidden");
  document.getElementById("chatContainer").classList.remove("hidden");
  document.querySelector("footer").classList.remove("hidden");
  updateCompanionDisplay();
  populateStarters();
}

// Companion display
function updateCompanionDisplay(){
  const compId = localStorage.getItem("companion") || "Whisp";
  document.getElementById("companionName").textContent = companions[compId].name;
  document.getElementById("companionDesc").textContent = companions[compId].desc;
}

// Options panel
function openOptions(){
  alert("Here you could allow companion change and color customization.");
}

// Chat handling
const chat = document.getElementById("chat");
function addMessage(text,sender){
  const div=document.createElement("div");
  div.className=`message ${sender}`;
  div.textContent=text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function sendMessage(msg=null){
  const input = document.getElementById("userInput");
  const text = msg || input.value.trim();
  if(!text) return;
  addMessage(text,"user");
  input.value="";
  setTimeout(()=>addMessage(`Echo: ${text}`,"bot"),500);
}

// Conversation starters (daily)
const conversationStarters = {
  Workplace:["Good morning! How's your day starting?","Hi! Project update?","Evening! Ready to wrap up?"],
  Dating:["Hi there! Coffee?","Want to take a walk?"],
  Travel:["Where is the nearest train station?"],
  School:["How was class today?","Need homework help?"],
  Advanced:["Did you see the game yesterday?"]
};

function getDailyStarter(category){
  const today = new Date().toDateString();
  const key = `starter_${category}`;
  let stored = JSON.parse(localStorage.getItem(key)) || {};
  if(stored.date === today) return stored.phrase;
  const phrases = conversationStarters[category];
  const phrase = phrases[Math.floor(Math.random()*phrases.length)];
  localStorage.setItem(key,JSON.stringify({date:today,phrase}));
  return phrase;
}

function populateStarters(){
  const dd = document.getElementById("starterDropdown");
  dd.innerHTML=`<option value="">-- Select Starter --</option>`;
  Object.keys(conversationStarters).forEach(cat=>{
    const phrase=getDailyStarter(cat);
    const opt=document.createElement("option");
    opt.value=phrase;
    opt.textContent=`${cat}: ${phrase}`;
    dd.appendChild(opt);
  });
}

function startStarter(){
  const val=document.getElementById("starterDropdown").value;
  if(val) sendMessage(val);
}

// Footer links
function returnToChat(){alert("Privacy/Support modal here.");}
</script>
</body>
</html>
